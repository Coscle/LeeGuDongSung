{"ast":null,"code":"export const openDatabase = () => {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('UserDatabase', 2);\n    request.onerror = event => {\n      console.error('Database error:', event.target.error);\n      reject('Database error');\n    };\n    request.onsuccess = event => {\n      const db = event.target.result;\n      resolve(db);\n    };\n    request.onupgradeneeded = event => {\n      const db = event.target.result;\n      if (event.oldVersion < 1) {\n        const objectStore = db.createObjectStore('users', {\n          keyPath: 'email'\n        });\n        objectStore.createIndex('email', 'email', {\n          unique: true\n        });\n        objectStore.createIndex('phoneNumber', 'phoneNumber', {\n          unique: false\n        });\n        objectStore.createIndex('nickname', 'nickname', {\n          unique: false\n        });\n        objectStore.createIndex('tags', 'tags', {\n          unique: false\n        });\n        objectStore.createIndex('snsType', 'snsType', {\n          unique: false\n        });\n        objectStore.createIndex('snsAddress', 'snsAddress', {\n          unique: false\n        });\n        objectStore.createIndex('profilePicture', 'profilePicture', {\n          unique: false\n        });\n        objectStore.createIndex('password', 'password', {\n          unique: false\n        });\n        objectStore.createIndex('selfIntroduction', 'selfIntroduction', {\n          unique: false\n        });\n      }\n      if (event.oldVersion < 2) {\n        //selfIntroduction 필드 추가\n        const objectStore = request.transaction.objectStore('users');\n        if (!objectStore.indexNames.contains('selfIntroduction')) {\n          objectStore.createIndex('selfIntroduction', 'selfIntroduction', {\n            unique: false\n          });\n        }\n      }\n    };\n  });\n};\nexport const saveUserData = (db, userData) => {\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(['users'], 'readwrite');\n    const objectStore = transaction.objectStore('users');\n    const request = objectStore.put(userData);\n    request.onsuccess = () => {\n      resolve();\n    };\n    request.onerror = event => {\n      console.error('Save error:', event.target.error);\n      reject('Save error');\n    };\n  });\n};\nexport const getUserData = (db, email) => {\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(['users'], 'readonly');\n    const objectStore = transaction.objectStore('users');\n    const request = objectStore.get(email);\n    request.onsuccess = event => {\n      resolve(event.target.result);\n    };\n    request.onerror = event => {\n      console.error('Get error:', event.target.error);\n      reject('Get error');\n    };\n  });\n};\nexport const getUserDataBySnsAddress = (db, snsAddress) => {\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(['users'], 'readonly');\n    const objectStore = transaction.objectStore('users');\n    const index = objectStore.index('snsAddress');\n    const request = index.get(snsAddress);\n    request.onsuccess = event => {\n      resolve(event.target.result);\n    };\n    request.onerror = event => {\n      console.error('Get error:', event.target.error);\n      reject('Get error');\n    };\n  });\n};\nexport const getUserDataByPhoneNumber = (db, phoneNumber) => {\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(['users'], 'readonly');\n    const objectStore = transaction.objectStore('users');\n    const index = objectStore.index('phoneNumber');\n    const request = index.get(phoneNumber);\n    request.onsuccess = event => {\n      resolve(event.target.result);\n    };\n    request.onerror = event => {\n      console.error('Get error:', event.target.error);\n      reject('Get error');\n    };\n  });\n};\nexport const getUserDataByPassword = (db, password) => {\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(['users'], 'readonly');\n    const objectStore = transaction.objectStore('users');\n    const index = objectStore.index('password');\n    const request = index.get(password);\n    request.onsuccess = event => {\n      resolve(event.target.result);\n    };\n    request.onerror = event => {\n      console.error('Get error:', event.target.error);\n      reject('Get error');\n    };\n  });\n};","map":{"version":3,"names":["openDatabase","Promise","resolve","reject","request","indexedDB","open","onerror","event","console","error","target","onsuccess","db","result","onupgradeneeded","oldVersion","objectStore","createObjectStore","keyPath","createIndex","unique","transaction","indexNames","contains","saveUserData","userData","put","getUserData","email","get","getUserDataBySnsAddress","snsAddress","index","getUserDataByPhoneNumber","phoneNumber","getUserDataByPassword","password"],"sources":["C:/FullStack/Workspace/dongsung/src/db.js"],"sourcesContent":["export const openDatabase = () => {\r\n  return new Promise((resolve, reject) => {\r\n    const request = indexedDB.open('UserDatabase', 2);\r\n\r\n    request.onerror = (event) => {\r\n      console.error('Database error:', event.target.error);\r\n      reject('Database error');\r\n    };\r\n\r\n    request.onsuccess = (event) => {\r\n      const db = event.target.result;\r\n      resolve(db);\r\n    };\r\n\r\n    request.onupgradeneeded = (event) => {\r\n      const db = event.target.result;\r\n      if(event.oldVersion <1){\r\n\t      const objectStore = db.createObjectStore('users', { keyPath: 'email' });\r\n\t      objectStore.createIndex('email', 'email', { unique: true });\r\n\t      objectStore.createIndex('phoneNumber', 'phoneNumber', { unique: false });\r\n\t      objectStore.createIndex('nickname', 'nickname', { unique: false });\r\n\t      objectStore.createIndex('tags', 'tags', { unique: false });\r\n\t      objectStore.createIndex('snsType', 'snsType', { unique: false });\r\n\t      objectStore.createIndex('snsAddress', 'snsAddress', { unique: false });\r\n\t      objectStore.createIndex('profilePicture', 'profilePicture', { unique: false });\r\n\t      objectStore.createIndex('password', 'password', { unique: false });\r\n\t      objectStore.createIndex('selfIntroduction', 'selfIntroduction', { unique: false });\r\n      }\r\n      if(event.oldVersion <2){\r\n\t\t  //selfIntroduction 필드 추가\r\n\t\t  const objectStore = request.transaction.objectStore('users');\r\n\t\t  if(!objectStore.indexNames.contains('selfIntroduction')){\r\n\t\t  objectStore.createIndex('selfIntroduction', 'selfIntroduction', {unique:false});\r\n\t\t  }\r\n\t  }\r\n    };\r\n  });\r\n};\r\n\r\nexport const saveUserData = (db, userData) => {\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(['users'], 'readwrite');\r\n    const objectStore = transaction.objectStore('users');\r\n    const request = objectStore.put(userData);\r\n\r\n    request.onsuccess = () => {\r\n      resolve();\r\n    };\r\n\r\n    request.onerror = (event) => {\r\n      console.error('Save error:', event.target.error);\r\n      reject('Save error');\r\n    };\r\n  });\r\n};\r\n\r\nexport const getUserData = (db, email) => {\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(['users'], 'readonly');\r\n    const objectStore = transaction.objectStore('users');\r\n    const request = objectStore.get(email);\r\n\r\n    request.onsuccess = (event) => {\r\n      resolve(event.target.result);\r\n    };\r\n\r\n    request.onerror = (event) => {\r\n      console.error('Get error:', event.target.error);\r\n      reject('Get error');\r\n    };\r\n  });\r\n};\r\n\r\nexport const getUserDataBySnsAddress = (db, snsAddress) => {\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(['users'], 'readonly');\r\n    const objectStore = transaction.objectStore('users');\r\n    const index = objectStore.index('snsAddress');\r\n    const request = index.get(snsAddress);\r\n\r\n    request.onsuccess = (event) => {\r\n      resolve(event.target.result);\r\n    };\r\n\r\n    request.onerror = (event) => {\r\n      console.error('Get error:', event.target.error);\r\n      reject('Get error');\r\n    };\r\n  });\r\n};\r\n\r\nexport const getUserDataByPhoneNumber = (db, phoneNumber) => {\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(['users'], 'readonly');\r\n    const objectStore = transaction.objectStore('users');\r\n    const index = objectStore.index('phoneNumber');\r\n    const request = index.get(phoneNumber);\r\n\r\n    request.onsuccess = (event) => {\r\n      resolve(event.target.result);\r\n    };\r\n\r\n    request.onerror = (event) => {\r\n      console.error('Get error:', event.target.error);\r\n      reject('Get error');\r\n    };\r\n  });\r\n};\r\n\r\nexport const getUserDataByPassword = (db, password) => {\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(['users'], 'readonly');\r\n    const objectStore = transaction.objectStore('users');\r\n    const index = objectStore.index('password');\r\n    const request = index.get(password);\r\n\r\n    request.onsuccess = (event) => {\r\n      resolve(event.target.result);\r\n    };\r\n\r\n    request.onerror = (event) => {\r\n      console.error('Get error:', event.target.error);\r\n      reject('Get error');\r\n    };\r\n  });\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}